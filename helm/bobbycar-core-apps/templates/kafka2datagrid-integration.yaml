apiVersion: camel.apache.org/v1
kind: Integration
metadata:
  name: kafka2datagrid
  labels:
    app.kubernetes.io/part-of: {{ .Values.appName }}
spec:
  configuration:
    - type: secret
      value: kafka2datagrid
  profile: OpenShift
  dependencies:
    - camel:netty-http
  sources:
    - content: {{ .Files.Get "data/java/KafkaToDatagridRoute.java" | quote }}
      name: KafkaToDatagridRoute.java
  template:
    spec:
      containers:
        - name: integration
          env:
            - name: KAFKA_JAAS_CONFIG
              valueFrom:
                secretKeyRef:
                  name: drogue-iot
                  key: sasl.jaas.config
  traits:
    logging:
      configuration:
        color: false
    service:
      configuration:
        enabled: false
